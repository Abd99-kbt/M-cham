<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± TinyMCE Ø§Ù„Ø¨Ø³ÙŠØ·</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            direction: rtl; 
            padding: 20px; 
            background: #f8f9fa;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px; 
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status { 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 5px; 
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        textarea { 
            width: 100%; 
            height: 300px; 
            border: 2px solid #ddd; 
            border-radius: 5px; 
            padding: 10px;
            font-family: Arial, sans-serif;
            direction: rtl;
            text-align: right;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        #log { 
            background: #f8f9fa; 
            border: 1px solid #ddd; 
            padding: 15px; 
            border-radius: 5px; 
            height: 200px; 
            overflow-y: auto; 
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± TinyMCE Ø§Ù„Ø¨Ø³ÙŠØ·</h1>
        
        <div id="status-container">
            <div id="loading-status" class="status info">ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ TinyMCE...</div>
            <div id="success-status" class="status success" style="display: none;">âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ TinyMCE Ø¨Ù†Ø¬Ø§Ø­!</div>
            <div id="error-status" class="status error" style="display: none;">âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ TinyMCE</div>
        </div>

        <h2>ğŸ“ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h2>
        <textarea id="test-editor" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±...">
Ù…Ø±Ø­Ø¨Ø§Ù‹! Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù…Ø­Ø±Ø± Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØºÙ†ÙŠ.

ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø±Ø¨Ø©:
â€¢ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ø±ÙŠØ¶ ÙˆØ§Ù„Ù…Ø§Ø¦Ù„
â€¢ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… ÙˆØ§Ù„ØªØ±Ù‚ÙŠÙ…  
â€¢ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø±
â€¢ Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø¬Ø¯Ø§ÙˆÙ„

Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙÙˆÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ù†ØµØŒ ÙØ§Ù„Ù…Ø­Ø±Ø± ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰
        </textarea>

        <div style="margin: 20px 0;">
            <button onclick="testTinyMCE()">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±</button>
            <button onclick="reloadTinyMCE()" class="btn-danger">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„</button>
            <button onclick="getContent()">ğŸ“„ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</button>
            <button onclick="clearLog()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button>
        </div>

        <h3>ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«:</h3>
        <div id="log"></div>
    </div>

    <!-- ØªØ­Ù…ÙŠÙ„ TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" 
            referrerpolicy="origin" 
            crossorigin="anonymous" 
            onload="onTinyMCELoad()" 
            onerror="onTinyMCEError()"></script>

    <!-- Fallback CDN -->
    <script>
        let logElement = null;
        let retryCount = 0;
        
        document.addEventListener('DOMContentLoaded', function() {
            logElement = document.getElementById('log');
            log('ğŸ“„ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
        });

        function log(message) {
            const now = new Date().toLocaleTimeString('ar-SA');
            const text = `[${now}] ${message}\n`;
            if (logElement) {
                logElement.textContent += text;
                logElement.scrollTop = logElement.scrollHeight;
            }
            console.log(message);
        }

        function onTinyMCELoad() {
            log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ TinyMCE Ù…Ù† CDN Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ');
            document.getElementById('loading-status').style.display = 'none';
            document.getElementById('success-status').style.display = 'block';
            initEditor();
        }

        function onTinyMCEError() {
            log('âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ CDN Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ - Ø¬Ø§Ø±ÙŠ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„...');
            loadFallbackTinyMCE();
        }

        function loadFallbackTinyMCE() {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/tinymce@6/tinymce.min.js';
            script.crossOrigin = 'anonymous';
            script.onload = function() {
                log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ TinyMCE Ù…Ù† CDN Ø§Ù„Ø¨Ø¯ÙŠÙ„');
                document.getElementById('loading-status').style.display = 'none';
                document.getElementById('success-status').style.display = 'block';
                initEditor();
            };
            script.onerror = function() {
                log('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ TinyMCE Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø±');
                document.getElementById('loading-status').style.display = 'none';
                document.getElementById('error-status').style.display = 'block';
            };
            document.head.appendChild(script);
        }

        function initEditor() {
            log('ğŸš€ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© Ù…Ø­Ø±Ø± TinyMCE...');
            
            tinymce.init({
                selector: '#test-editor',
                language: 'ar',
                directionality: 'rtl',
                height: 300,
                menubar: false,
                branding: false,
                promotion: false,
                
                plugins: ['lists', 'link', 'code', 'preview', 'directionality'],
                toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | ltr rtl | bullist numlist | link | code preview',
                
                content_style: 'body { font-family: Arial, sans-serif; font-size: 14px; direction: rtl; text-align: right; }',
                
                setup: function(editor) {
                    editor.on('init', function() {
                        log('ğŸ‰ ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ù…Ø­Ø±Ø± TinyMCE Ø¨Ù†Ø¬Ø§Ø­!');
                        editor.getDoc().dir = 'rtl';
                        editor.getBody().style.direction = 'rtl';
                        editor.getBody().style.textAlign = 'right';
                    });
                    
                    editor.on('change keyup', function() {
                        log('âœï¸ ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø±Ø±');
                    });
                }
            });
        }

        function testTinyMCE() {
            log('ğŸ§ª Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±...');
            
            if (typeof tinymce === 'undefined') {
                log('âŒ TinyMCE ØºÙŠØ± Ù…Ø­Ù…Ù„');
                return;
            }
            
            const editor = tinymce.get('test-editor');
            if (!editor) {
                log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø­Ø±Ø± TinyMCE');
                return;
            }
            
            log('âœ… Ø§Ù„Ù…Ø­Ø±Ø± Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙŠØ¹Ù…Ù„');
            log(`ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø±Ø±: ${editor.initialized ? 'Ù…Ù‡ÙŠØ£' : 'ØºÙŠØ± Ù…Ù‡ÙŠØ£'}`);
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¯Ø±Ø§Ø¬ Ù†Øµ
            editor.setContent('<p><strong>Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­!</strong> ØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ Ù…Ù† Ø®Ù„Ø§Ù„ JavaScript.</p>');
            log('âœ… ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ù…Ø­ØªÙˆÙ‰');
        }

        function getContent() {
            const editor = tinymce.get('test-editor');
            if (editor) {
                const content = editor.getContent();
                log('ğŸ“„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø±Ø±: ' + content);
            } else {
                log('âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø±Ø±');
            }
        }

        function reloadTinyMCE() {
            log('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ø±...');
            
            if (typeof tinymce !== 'undefined') {
                tinymce.remove('#test-editor');
                log('ğŸ—‘ï¸ ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø±Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…');
            }
            
            setTimeout(initEditor, 500);
        }

        function clearLog() {
            if (logElement) {
                logElement.textContent = '';
                log('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„');
            }
        }
    </script>
</body>
</html>