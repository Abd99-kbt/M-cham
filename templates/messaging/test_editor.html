<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø±Ø± Ø§Ù„Ù†ØµÙˆØµ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    
    <style>
        body {
            font-family: 'Tajawal', Arial, sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .status-box {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø±Ø± Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØºÙ†ÙŠ</h1>
        
        <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <div id="loading-status" class="status-box info">
            <strong>â³ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ TinyMCE...</strong>
        </div>
        
        <div id="test-results"></div>
        
        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div class="mb-4">
            <h3>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±</h3>
            <textarea id="test-editor" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±...">
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø­Ø±Ø± Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØºÙ†ÙŠ!</h2>
                <p>Ù‡Ø°Ø§ Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø±. ÙŠÙ…ÙƒÙ†Ùƒ:</p>
                <ul>
                    <li><strong>ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø¹Ø±ÙŠØ¶</strong></li>
                    <li><em>Ù†Øµ Ù…Ø§Ø¦Ù„</em></li>
                    <li><u>Ù†Øµ Ù…Ø³Ø·Ø±</u></li>
                </ul>
                <blockquote>
                    "Ù‡Ø°Ø§ Ø§Ù‚ØªØ¨Ø§Ø³ ØªØ¬Ø±ÙŠØ¨ÙŠ"
                </blockquote>
                <p style="color: #1e4a6b;">Ù†Øµ Ù…Ù„ÙˆÙ† Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ù‚</p>
            </textarea>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <div class="row">
            <div class="col-md-6">
                <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­</h4>
                <p><strong>Ø§Ù„Ù…ØªØµÙØ­:</strong> <span id="browser-info"></span></p>
                <p><strong>Ø­Ø§Ù„Ø© Ø§Ù„ØµÙØ­Ø©:</strong> <span id="page-status"></span></p>
            </div>
            <div class="col-md-6">
                <h4>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</h4>
                <p><strong>Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª:</strong> <span id="connection-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span></p>
                <p><strong>CDN TinyMCE:</strong> <span id="cdn-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span></p>
            </div>
        </div>
        
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div class="text-center mt-4">
            <button type="button" class="btn btn-primary" onclick="testBasicFeatures()">
                Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            </button>
            <button type="button" class="btn btn-success" onclick="testArabicSupport()">
                Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            </button>
            <button type="button" class="btn btn-warning" onclick="reinitializeEditor()">
                Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø±
            </button>
            <button type="button" class="btn btn-info" onclick="generateReport()">
                ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
            </button>
        </div>
        
        <!-- Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div id="test-output" class="mt-4"></div>
    </div>

    <script>
        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©
        document.getElementById('browser-info').textContent = navigator.userAgent.split(') ')[0] + ')';
        document.getElementById('page-status').textContent = document.readyState;
        
        // ÙØ­Øµ TinyMCE
        function checkTinyMCE() {
            const loadingStatus = document.getElementById('loading-status');
            const testResults = document.getElementById('test-results');
            
            if (typeof tinymce === 'undefined') {
                loadingStatus.className = 'status-box error';
                loadingStatus.innerHTML = '<strong>âŒ Ø®Ø·Ø£:</strong> Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ TinyMCE. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.';
                
                testResults.innerHTML = `
                    <div class="status-box error">
                        <h4>Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</h4>
                        <p>Ø£Ø³Ø¨Ø§Ø¨ Ù…Ø­ØªÙ…Ù„Ø©:</p>
                        <ul>
                            <li>Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</li>
                            <li>Ø­Ø¬Ø¨ CDN Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØµÙØ­ Ø£Ùˆ Ø§Ù„Ø´Ø±ÙƒØ©</li>
                            <li>Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</li>
                        </ul>
                        <p><strong>Ø§Ù„Ø­Ù„:</strong> ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©</p>
                    </div>
                `;
                return false;
            }
            
            loadingStatus.className = 'status-box success';
            loadingStatus.innerHTML = '<strong>âœ… Ù†Ø¬Ø­:</strong> ØªÙ… ØªØ­Ù…ÙŠÙ„ TinyMCE Ø¨Ù†Ø¬Ø§Ø­!';
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø±
            initializeTestEditor();
            return true;
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
        function initializeTestEditor() {
            tinymce.init({
                selector: '#test-editor',
                language: 'ar',
                directionality: 'rtl',
                height: 300,
                menubar: true,
                
                plugins: [
                    'advlist', 'autolink', 'lists', 'link', 'charmap', 'preview',
                    'searchreplace', 'visualblocks', 'code', 'fullscreen',
                    'wordcount', 'emoticons', 'textcolor', 'colorpicker', 'directionality'
                ],
                
                toolbar: [
                    'formatselect fontselect fontsizeselect',
                    'bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright | ltr rtl',
                    'bullist numlist | link emoticons charmap | searchreplace code fullscreen preview'
                ],
                
                font_family_formats: 'Tajawal=Tajawal, Arial, sans-serif; Arial=arial,helvetica,sans-serif; Times New Roman=times new roman,times,serif;',
                fontsize_formats: '8pt 10pt 12pt 14pt 16pt 18pt 20pt 24pt 36pt 48pt',
                
                content_style: `
                    body { 
                        font-family: 'Tajawal', Arial, sans-serif; 
                        font-size: 14px; 
                        direction: rtl; 
                        text-align: right;
                        line-height: 1.6;
                        color: #333;
                        padding: 15px;
                    }
                    h1, h2, h3, h4, h5, h6 { color: #1e4a6b; }
                    ul, ol { padding-right: 20px; }
                `,
                
                init_instance_callback: function(editor) {
                    document.getElementById('test-results').innerHTML = `
                        <div class="status-box success">
                            <h4>âœ… Ø§Ù„Ù…Ø­Ø±Ø± Ø¬Ø§Ù‡Ø²!</h4>
                            <p>ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø± Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª.</p>
                        </div>
                    `;
                },
                
                onerror: function(error) {
                    document.getElementById('test-results').innerHTML = `
                        <div class="status-box error">
                            <h4>âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©</h4>
                            <p>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£: ${error}</p>
                        </div>
                    `;
                }
            });
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        function testBasicFeatures() {
            if (tinymce.get('test-editor')) {
                const editor = tinymce.get('test-editor');
                editor.setContent('<h3>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3><p><strong>Ù†Øµ Ø¹Ø±ÙŠØ¶</strong> Ùˆ <em>Ù†Øµ Ù…Ø§Ø¦Ù„</em> Ùˆ <u>Ù†Øµ Ù…Ø³Ø·Ø±</u></p>');
                showMessage('ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©', 'success');
            }
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        function testArabicSupport() {
            if (tinymce.get('test-editor')) {
                const editor = tinymce.get('test-editor');
                editor.setContent('<h3>Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h3><p>Ù‡Ø°Ø§ Ù†Øµ Ø¹Ø±Ø¨ÙŠ <strong>Ø¹Ø±ÙŠØ¶</strong> ÙˆÙ†Øµ <em>Ù…Ø§Ø¦Ù„</em></p><ul><li>Ø¹Ù†ØµØ± Ø£ÙˆÙ„</li><li>Ø¹Ù†ØµØ± Ø«Ø§Ù†ÙŠ</li></ul>');
                showMessage('ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', 'success');
            }
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø±
        function reinitializeEditor() {
            if (tinymce.get('test-editor')) {
                tinymce.get('test-editor').remove();
            }
            setTimeout(initializeTestEditor, 100);
            showMessage('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø±Ø±', 'info');
        }
        
        // ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
        function generateReport() {
            const report = {
                tinymceLoaded: typeof tinymce !== 'undefined',
                editorInstance: !!tinymce.get('test-editor'),
                userAgent: navigator.userAgent,
                url: window.location.href,
                timestamp: new Date().toISOString()
            };
            
            document.getElementById('test-output').innerHTML = `
                <h4>ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</h4>
                <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto;">
${JSON.stringify(report, null, 2)}
                </pre>
            `;
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø©
        function showMessage(message, type) {
            const output = document.getElementById('test-output');
            output.innerHTML = `<div class="status-box ${type}">${message}</div>`;
        }
        
        // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„
        async function checkConnection() {
            try {
                const response = await fetch('https://cdn.tiny.cloud/1/favicon.ico', { mode: 'no-cors' });
                document.getElementById('connection-status').innerHTML = '<span style="color: green;">âœ… Ù…ØªØµÙ„</span>';
                document.getElementById('cdn-status').innerHTML = '<span style="color: green;">âœ… Ù…ØªØ§Ø­</span>';
            } catch (error) {
                document.getElementById('connection-status').innerHTML = '<span style="color: red;">âŒ Ù…Ù†Ù‚Ø·Ø¹</span>';
                document.getElementById('cdn-status').innerHTML = '<span style="color: red;">âŒ ØºÙŠØ± Ù…ØªØ§Ø­</span>';
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            setTimeout(checkTinyMCE, 500);
            checkConnection();
        });
    </script>
</body>
</html>